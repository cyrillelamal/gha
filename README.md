# GitHub Actions: CI/CD

> Использование GitHub как системы для непрерывной интеграции и развертывания современного веб-проекта

## Запуск

1. Указать порты сервера в `docker-compose`. Например, если нужен доступ через `localhost:8090`:
```yaml
services:
    ...
    wordpress:
        image: wordpress:5.9.1-apache
        ports:
            - "8090:80"
            # - "80:80"
            # - "443:443"
```

2. Запустить `deploy.sh`, передав хост, на котором должно быть развёртнуто приложение. Хост **обязан** включать схему. Если порт отличается от `80`, тогда нужно передать и порт, например:
```shell
sh deploy.sh http://my.gha.net  # 80 порт
sh deploy.sh http://localhost:8090  # 8090 порт
```

3. Если приложение используется не локально, **обязательно поменять пароль!**

Логин: `admin`

Пароль: `LecOaToQQNm0cWIMIf`

## Фиксация изменений

Воспользуйтесь скриптом `utils/dump.php`.

Скрип получает дамп базы данных с помощью *mysqldump* контейнера и сохраняет его по пути `dump/dump.sql` (относительно
корня проекта).

При миграции на другие ОС могут возникнуть проблемы с выводом в консоль и TTY. WSL2 сразу же отдаёт весь вывод в STDOUT,
мимо скрипта, поэтому дамп оказывается пуст; но если перенаправить вывод, слетит кодировка. Поэтому **в Windows надо делать
дамп именно из консоли Windows (CMD, PowerShell)**.
